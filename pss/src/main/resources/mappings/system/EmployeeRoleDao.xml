<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nmw.pss.module.system.dao.EmployeeRoleDao">
    <resultMap type="EmployeeRole" id="entityResult">
    	<id property="id" column="id"/>
    	<result property="createTime" column="create_time"/>
    	<result property="updateTime" column="update_time"/>
    	<result property="createUserId" column="create_user"/>
    	<result property="updateUserId" column="update_user"/>
    	<result property="remark" column="remark"/>
    	<result property="delSign" column="del_sign"/>
    	
    	<result property="employeeId" column="employee_id"/>
    	<result property="roleId" column="role_id"/>
    </resultMap>
    
	<insert id="insert">
		INSERT INTO employee_role(id, create_time, update_time, create_user, update_user, remark, del_sign,
			employee_id, role_id) 
		VALUES (#{id}, #{createTime}, #{updateTime}, #{createUserId}, #{updateUserId}, #{remark}, #{delSign}, 
		#{employeeId}, #{roleId})
	</insert>
	
	<delete id="deleteById">
		DELETE FROM employee_role WHERE id = #{id}
	</delete>
	
	<delete id="deleteByModel">
		DELETE FROM 
			employee_role 
		<where>
			<if test="employeeId != null and employeeId != ''">
				AND employee_id=#{employeeId}
			</if>
			<if test="roleId != null and roleId != ''">
				AND role_id=#{roleId}
			</if>
		</where>
	</delete>
	
	<select id="selectById" resultMap="entityResult">
		SELECT 
			*
		FROM 
			employee_role 
		WHERE 
			id = #{id}
	</select>
	
	<update id="updateById">
		UPDATE employee_role 
		SET 
			update_time = #{updateTime}, 
			update_user = #{updateUserId}, 
			remark = #{remark}, 
			del_sign = #{delSign}, 
			
			employee_id = #{employeeId}, 
			role_id = #{roleId}
		WHERE id = #{id}
	</update>
	
	<select id="selectByModel" resultMap="entityResult">
		SELECT 
			*
		FROM 
			employee_role 
		<where>
			del_sign=#{DEL_NORMAL}
			<if test="employeeId != null and employeeId != ''">
				AND employee_id=#{employeeId}
			</if>
			<if test="roleId != null and roleId != ''">
				AND role_id=#{roleId}
			</if>
		</where>
	</select>
	
</mapper>